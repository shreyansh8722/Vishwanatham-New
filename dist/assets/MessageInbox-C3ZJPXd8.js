import{j as e,h as d,ab as u,U as g,i as h}from"./ui-vendor-ByakZdH1.js";import{r}from"./react-vendor-Ck_sYhI8.js";import{d as i}from"./index-BbtcUq24.js";import{l as y,v as j,x as b,p as f,B as v,d as n,A as N}from"./firebase-vendor-B9bmCHsT.js";const A=()=>{const[o,c]=r.useState([]),[l,x]=r.useState(!0);r.useEffect(()=>y(j(f(i,"messages"),b("createdAt","desc")),a=>{c(a.docs.map(t=>({id:t.id,...t.data()}))),x(!1)}),[]);const m=async(s,a)=>{a||await v(n(i,"messages",s),{read:!0})},p=async(s,a)=>{s.stopPropagation(),confirm("Delete message?")&&await N(n(i,"messages",a))};return l?e.jsx("div",{className:"p-10 text-center text-gray-400",children:"Loading inbox..."}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(d,{className:"text-[#B08D55]"})," Customer Inquiries"]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden divide-y divide-gray-100",children:o.length===0?e.jsx("div",{className:"p-12 text-center text-gray-400",children:"No messages yet."}):o.map(s=>{var a;return e.jsxs("div",{onClick:()=>m(s.id,s.read),className:`p-6 cursor-pointer hover:bg-gray-50 transition-colors group relative ${s.read?"":"bg-blue-50/30"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.read?"bg-gray-100 text-gray-400":"bg-[#B08D55] text-white"}`,children:s.read?e.jsx(u,{size:16}):e.jsx(d,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm ${s.read?"font-medium text-gray-700":"font-bold text-gray-900"}`,children:s.subject}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[e.jsx(g,{size:10})," ",s.name," <",s.email,">"]})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:(a=s.createdAt)!=null&&a.toDate?s.createdAt.toDate().toLocaleDateString():"Now"})]}),e.jsx("p",{className:"text-sm text-gray-600 pl-11 leading-relaxed",children:s.message}),e.jsx("button",{onClick:t=>p(t,s.id),className:"absolute top-6 right-6 p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(h,{size:18})})]},s.id)})})]})};export{A as MessageInbox};
