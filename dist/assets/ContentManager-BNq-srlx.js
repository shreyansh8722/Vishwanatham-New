import{j as e,a7 as L,a8 as Q,L as y,i as v}from"./ui-vendor-ByakZdH1.js";import{r as t}from"./react-vendor-Ck_sYhI8.js";import{d,s as z}from"./index-BbtcUq24.js";import{l as w,v as N,x as A,p as g,r as U,z as $,k as E,n as q,m as D,A as G,d as I}from"./firebase-vendor-B9bmCHsT.js";import{c as P}from"./utils-CPfiu7fX.js";const K=()=>{const[c,h]=t.useState("testimonials"),[F,b]=t.useState(!0),[m,x]=t.useState(!1),[k,C]=t.useState([]),[B,S]=t.useState([]),[o,u]=t.useState({name:"",role:"",text:"",rating:5,image:""}),[l,p]=t.useState({question:"",answer:"",category:"General"}),[n,f]=t.useState(null);t.useEffect(()=>{b(!0);const s=w(N(g(d,"testimonials"),A("createdAt","desc")),i=>{C(i.docs.map(r=>({id:r.id,...r.data()})))}),a=w(N(g(d,"faqs"),A("createdAt","desc")),i=>{S(i.docs.map(r=>({id:r.id,...r.data()}))),b(!1)});return()=>{s(),a()}},[]);const T=async s=>{s.preventDefault(),x(!0);try{let a="";if(n){const i=await P(n),r=U(z,`content/testimonials/${Date.now()}_${n.name}`);await $(r,i),a=await E(r)}await q(g(d,"testimonials"),{...o,image:a,createdAt:D()}),u({name:"",role:"",text:"",rating:5,image:""}),f(null),alert("Testimonial added!")}catch(a){console.error(a),alert("Failed to add testimonial")}finally{x(!1)}},R=async s=>{s.preventDefault(),x(!0);try{await q(g(d,"faqs"),{...l,createdAt:D()}),p({question:"",answer:"",category:"General"}),alert("FAQ added!")}catch(a){console.error(a),alert("Failed to add FAQ")}finally{x(!1)}},j=async(s,a)=>{window.confirm("Delete this item?")&&await G(I(d,s,a))};return F?e.jsx("div",{className:"p-10 text-center text-gray-400",children:"Loading content..."}):e.jsxs("div",{className:"max-w-5xl mx-auto pb-20",children:[e.jsxs("div",{className:"flex gap-4 border-b border-gray-200 mb-8",children:[e.jsxs("button",{onClick:()=>h("testimonials"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${c==="testimonials"?"border-b-2 border-[#B08D55] text-[#B08D55]":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(L,{size:18})," Testimonials"]}),e.jsxs("button",{onClick:()=>h("faqs"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${c==="faqs"?"border-b-2 border-[#B08D55] text-[#B08D55]":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(Q,{size:18})," FAQs"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c==="testimonials"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Add Testimonial"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-16 h-16 bg-gray-100 rounded-full overflow-hidden border border-gray-200 relative group cursor-pointer",children:[e.jsx("img",{src:n?URL.createObjectURL(n):"https://placehold.co/100?text=User",className:"w-full h-full object-cover"}),e.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:s=>f(s.target.files[0])})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 uppercase",children:"Customer Photo"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Click to upload"})]})]}),e.jsx("input",{required:!0,placeholder:"Customer Name",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:o.name,onChange:s=>u({...o,name:s.target.value})}),e.jsx("input",{placeholder:"Location / Role (e.g. Mumbai)",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:o.role,onChange:s=>u({...o,role:s.target.value})}),e.jsx("textarea",{required:!0,rows:"3",placeholder:"Their review...",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:o.text,onChange:s=>u({...o,text:s.target.value})}),e.jsx("button",{disabled:m,className:"w-full bg-[#1A1A1A] text-white py-3 rounded-lg font-bold text-xs uppercase tracking-widest hover:bg-black transition-colors",children:m?e.jsx(y,{className:"animate-spin mx-auto"}):"Add Review"})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:k.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-start gap-4 group",children:[e.jsx("img",{src:s.image||"https://placehold.co/100",className:"w-12 h-12 rounded-full object-cover bg-gray-100"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:s.role}),e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',s.text,'"']})]}),e.jsx("button",{onClick:()=>j("testimonials",s.id),className:"text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(v,{size:16})})]},s.id))})]}),c==="faqs"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Add FAQ"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("select",{className:"w-full border p-2.5 rounded-lg text-sm outline-none bg-white",value:l.category,onChange:s=>p({...l,category:s.target.value}),children:[e.jsx("option",{children:"General"}),e.jsx("option",{children:"Shipping"}),e.jsx("option",{children:"Returns"}),e.jsx("option",{children:"Products"})]}),e.jsx("input",{required:!0,placeholder:"Question",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:l.question,onChange:s=>p({...l,question:s.target.value})}),e.jsx("textarea",{required:!0,rows:"4",placeholder:"Answer",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:l.answer,onChange:s=>p({...l,answer:s.target.value})}),e.jsx("button",{disabled:m,className:"w-full bg-[#1A1A1A] text-white py-3 rounded-lg font-bold text-xs uppercase tracking-widest hover:bg-black transition-colors",children:m?e.jsx(y,{className:"animate-spin mx-auto"}):"Add FAQ"})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:B.map(s=>e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 group relative",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-[#B08D55] bg-[#B08D55]/10 px-2 py-1 rounded-sm mb-2 inline-block",children:s.category}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:s.question}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:s.answer}),e.jsx("button",{onClick:()=>j("faqs",s.id),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(v,{size:16})})]},s.id))})]})]})]})};export{K as ContentManager};
