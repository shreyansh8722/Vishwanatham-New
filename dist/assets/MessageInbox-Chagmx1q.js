import{c as h,d as r,j as e,o,U as u,T as g}from"./index-BDlxOAt8.js";import{r as i}from"./react-vendor-5iokPOny.js";import{o as y,t as j,v as f,m as b,E as v,d as c,x as N}from"./firebase-vendor-AFMmvn69.js";/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=h("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]),L=()=>{const[d,n]=i.useState([]),[l,x]=i.useState(!0);i.useEffect(()=>y(j(b(r,"messages"),f("createdAt","desc")),s=>{n(s.docs.map(t=>({id:t.id,...t.data()}))),x(!1)}),[]);const m=async(a,s)=>{s||await v(c(r,"messages",a),{read:!0})},p=async(a,s)=>{a.stopPropagation(),confirm("Delete message?")&&await N(c(r,"messages",s))};return l?e.jsx("div",{className:"p-10 text-center text-gray-400",children:"Loading inbox..."}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"text-[#B08D55]"})," Customer Inquiries"]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden divide-y divide-gray-100",children:d.length===0?e.jsx("div",{className:"p-12 text-center text-gray-400",children:"No messages yet."}):d.map(a=>{var s;return e.jsxs("div",{onClick:()=>m(a.id,a.read),className:`p-6 cursor-pointer hover:bg-gray-50 transition-colors group relative ${a.read?"":"bg-blue-50/30"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.read?"bg-gray-100 text-gray-400":"bg-[#B08D55] text-white"}`,children:a.read?e.jsx(w,{size:16}):e.jsx(o,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm ${a.read?"font-medium text-gray-700":"font-bold text-gray-900"}`,children:a.subject}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[e.jsx(u,{size:10})," ",a.name," <",a.email,">"]})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:(s=a.createdAt)!=null&&s.toDate?a.createdAt.toDate().toLocaleDateString():"Now"})]}),e.jsx("p",{className:"text-sm text-gray-600 pl-11 leading-relaxed",children:a.message}),e.jsx("button",{onClick:t=>p(t,a.id),className:"absolute top-6 right-6 p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(g,{size:18})})]},a.id)})})]})};export{L as MessageInbox};
