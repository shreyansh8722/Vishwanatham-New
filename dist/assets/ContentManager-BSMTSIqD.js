import{c as D,d as i,j as e,L as j,T as v,s as Q}from"./index-BDlxOAt8.js";import{r as t}from"./react-vendor-5iokPOny.js";import{o as w,t as N,v as A,m as g,n as z,D as M,q as V,z as q,l as k,x as I,d as U}from"./firebase-vendor-AFMmvn69.js";import{c as $}from"./utils-D1JAXVn7.js";/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=D("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=D("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),J=()=>{const[d,h]=t.useState("testimonials"),[C,b]=t.useState(!0),[x,m]=t.useState(!1),[F,B]=t.useState([]),[S,T]=t.useState([]),[o,u]=t.useState({name:"",role:"",text:"",rating:5,image:""}),[l,p]=t.useState({question:"",answer:"",category:"General"}),[n,f]=t.useState(null);t.useEffect(()=>{b(!0);const s=w(N(g(i,"testimonials"),A("createdAt","desc")),c=>{B(c.docs.map(r=>({id:r.id,...r.data()})))}),a=w(N(g(i,"faqs"),A("createdAt","desc")),c=>{T(c.docs.map(r=>({id:r.id,...r.data()}))),b(!1)});return()=>{s(),a()}},[]);const R=async s=>{s.preventDefault(),m(!0);try{let a="";if(n){const c=await $(n),r=z(Q,`content/testimonials/${Date.now()}_${n.name}`);await M(r,c),a=await V(r)}await q(g(i,"testimonials"),{...o,image:a,createdAt:k()}),u({name:"",role:"",text:"",rating:5,image:""}),f(null),alert("Testimonial added!")}catch(a){console.error(a),alert("Failed to add testimonial")}finally{m(!1)}},L=async s=>{s.preventDefault(),m(!0);try{await q(g(i,"faqs"),{...l,createdAt:k()}),p({question:"",answer:"",category:"General"}),alert("FAQ added!")}catch(a){console.error(a),alert("Failed to add FAQ")}finally{m(!1)}},y=async(s,a)=>{window.confirm("Delete this item?")&&await I(U(i,s,a))};return C?e.jsx("div",{className:"p-10 text-center text-gray-400",children:"Loading content..."}):e.jsxs("div",{className:"max-w-5xl mx-auto pb-20",children:[e.jsxs("div",{className:"flex gap-4 border-b border-gray-200 mb-8",children:[e.jsxs("button",{onClick:()=>h("testimonials"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${d==="testimonials"?"border-b-2 border-[#B08D55] text-[#B08D55]":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(G,{size:18})," Testimonials"]}),e.jsxs("button",{onClick:()=>h("faqs"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${d==="faqs"?"border-b-2 border-[#B08D55] text-[#B08D55]":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(E,{size:18})," FAQs"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d==="testimonials"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Add Testimonial"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-16 h-16 bg-gray-100 rounded-full overflow-hidden border border-gray-200 relative group cursor-pointer",children:[e.jsx("img",{src:n?URL.createObjectURL(n):"https://placehold.co/100?text=User",className:"w-full h-full object-cover"}),e.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:s=>f(s.target.files[0])})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 uppercase",children:"Customer Photo"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Click to upload"})]})]}),e.jsx("input",{required:!0,placeholder:"Customer Name",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:o.name,onChange:s=>u({...o,name:s.target.value})}),e.jsx("input",{placeholder:"Location / Role (e.g. Mumbai)",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:o.role,onChange:s=>u({...o,role:s.target.value})}),e.jsx("textarea",{required:!0,rows:"3",placeholder:"Their review...",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:o.text,onChange:s=>u({...o,text:s.target.value})}),e.jsx("button",{disabled:x,className:"w-full bg-[#1A1A1A] text-white py-3 rounded-lg font-bold text-xs uppercase tracking-widest hover:bg-black transition-colors",children:x?e.jsx(j,{className:"animate-spin mx-auto"}):"Add Review"})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:F.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-start gap-4 group",children:[e.jsx("img",{src:s.image||"https://placehold.co/100",className:"w-12 h-12 rounded-full object-cover bg-gray-100"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:s.role}),e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',s.text,'"']})]}),e.jsx("button",{onClick:()=>y("testimonials",s.id),className:"text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(v,{size:16})})]},s.id))})]}),d==="faqs"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Add FAQ"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("select",{className:"w-full border p-2.5 rounded-lg text-sm outline-none bg-white",value:l.category,onChange:s=>p({...l,category:s.target.value}),children:[e.jsx("option",{children:"General"}),e.jsx("option",{children:"Shipping"}),e.jsx("option",{children:"Returns"}),e.jsx("option",{children:"Products"})]}),e.jsx("input",{required:!0,placeholder:"Question",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:l.question,onChange:s=>p({...l,question:s.target.value})}),e.jsx("textarea",{required:!0,rows:"4",placeholder:"Answer",className:"w-full border p-2.5 rounded-lg text-sm outline-none focus:border-[#B08D55]",value:l.answer,onChange:s=>p({...l,answer:s.target.value})}),e.jsx("button",{disabled:x,className:"w-full bg-[#1A1A1A] text-white py-3 rounded-lg font-bold text-xs uppercase tracking-widest hover:bg-black transition-colors",children:x?e.jsx(j,{className:"animate-spin mx-auto"}):"Add FAQ"})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:S.map(s=>e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 group relative",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-[#B08D55] bg-[#B08D55]/10 px-2 py-1 rounded-sm mb-2 inline-block",children:s.category}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:s.question}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:s.answer}),e.jsx("button",{onClick:()=>y("faqs",s.id),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(v,{size:16})})]},s.id))})]})]})]})};export{J as ContentManager};
