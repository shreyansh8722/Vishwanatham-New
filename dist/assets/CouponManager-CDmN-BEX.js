import{j as e,w as p,a9 as m,aa as x,i as h}from"./ui-vendor-ByakZdH1.js";import{r as a}from"./react-vendor-Ck_sYhI8.js";import{d}from"./index-BbtcUq24.js";import{l as v,v as g,x as b,p as o,A as j,d as f,n as N,m as y}from"./firebase-vendor-B9bmCHsT.js";const A=()=>{const[l,i]=a.useState([]),[r,t]=a.useState({code:"",type:"percent",value:"",minOrder:"",description:""});a.useEffect(()=>v(g(o(d,"coupons"),b("createdAt","desc")),u=>{i(u.docs.map(n=>({id:n.id,...n.data()})))}),[]);const c=async s=>{s.preventDefault(),await N(o(d,"coupons"),{...r,code:r.code.toUpperCase(),value:Number(r.value),minOrder:Number(r.minOrder),createdAt:y(),isActive:!0}),t({code:"",type:"percent",value:"",minOrder:"",description:""})};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-[#E1E3E5] shadow-sm",children:[e.jsxs("h2",{className:"text-lg font-bold text-[#202223] mb-4 flex items-center gap-2",children:[e.jsx(p,{size:20})," Create Discount"]}),e.jsxs("form",{onSubmit:c,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("input",{required:!0,placeholder:"Code (e.g. SALE10)",className:"w-full border p-2 rounded text-sm uppercase font-bold",value:r.code,onChange:s=>t({...r,code:s.target.value})})}),e.jsx("div",{children:e.jsxs("select",{className:"w-full border p-2 rounded text-sm bg-white",value:r.type,onChange:s=>t({...r,type:s.target.value}),children:[e.jsx("option",{value:"percent",children:"Percentage %"}),e.jsx("option",{value:"fixed",children:"Fixed ₹"})]})}),e.jsx("div",{children:e.jsx("input",{required:!0,type:"number",placeholder:"Value",className:"w-full border p-2 rounded text-sm",value:r.value,onChange:s=>t({...r,value:s.target.value})})}),e.jsx("div",{children:e.jsx("input",{required:!0,type:"number",placeholder:"Min Order ₹",className:"w-full border p-2 rounded text-sm",value:r.minOrder,onChange:s=>t({...r,minOrder:s.target.value})})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("input",{required:!0,placeholder:"Description (e.g. Summer Sale)",className:"w-full border p-2 rounded text-sm",value:r.description,onChange:s=>t({...r,description:s.target.value})})}),e.jsx("button",{className:"md:col-span-1 bg-[#1A1A1A] text-white rounded text-sm font-bold uppercase hover:bg-black",children:"Create"})]})]}),e.jsx("div",{className:"space-y-3",children:l.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-[#E1E3E5] shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-50 text-green-700 flex items-center justify-center border border-green-100",children:s.type==="percent"?e.jsx(m,{size:16}):e.jsx(x,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:s.code}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-bold",children:s.type==="percent"?`${s.value}% OFF`:`₹${s.value} OFF`}),e.jsx("button",{onClick:()=>j(f(d,"coupons",s.id)),className:"text-gray-400 hover:text-red-600",children:e.jsx(h,{size:18})})]})]},s.id))})]})};export{A as CouponManager};
