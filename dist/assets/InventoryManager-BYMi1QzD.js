import{d as c,j as t}from"./index-BDlxOAt8.js";import{r as o}from"./react-vendor-5iokPOny.js";import{o as g,m as x,E as h,d as b}from"./firebase-vendor-AFMmvn69.js";import{S as p}from"./save-Bo4zBVxG.js";const N=()=>{const[d,i]=o.useState([]),[a,n]=o.useState({});o.useEffect(()=>g(x(c,"products"),r=>{i(r.docs.map(s=>({id:s.id,...s.data()})))}),[]);const l=(e,r)=>{n(s=>({...s,[e]:Number(r)}))},m=async e=>{const r=a[e];if(r!==void 0)try{await h(b(c,"products",e),{stock:r});const s={...a};delete s[e],n(s)}catch(s){console.error("Error updating stock:",s),alert("Failed to update stock")}};return t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Quick Inventory"}),t.jsx("div",{className:"grid gap-4",children:d.map(e=>{const r=a[e.id]!==void 0,s=r?a[e.id]:e.stock;return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 flex items-center justify-between shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:e.featuredImageUrl,className:"w-12 h-12 rounded bg-gray-100 object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Live DB Stock: ",e.stock]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",min:"0",className:`w-24 p-2 border rounded font-bold text-center outline-none transition-all ${s===0?"bg-red-50 text-red-600 border-red-200":"bg-gray-50 border-gray-200"}`,value:s,onChange:u=>l(e.id,u.target.value)}),r&&t.jsx("button",{onClick:()=>m(e.id),className:"p-2 bg-black text-white rounded hover:bg-green-600 transition-colors animate-fade-in",title:"Save to Firebase",children:t.jsx(p,{size:18})})]})]},e.id)})})]})};export{N as InventoryManager};
